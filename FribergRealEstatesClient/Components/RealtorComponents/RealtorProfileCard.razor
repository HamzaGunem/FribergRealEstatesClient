@* Auth Hamza*@
@* updated and styled by Joanthan *@
@inject NavigationManager navigationManager
<div class="realtor-info-card">
<div  @onclick="@(() => NavigateToPerson(realtorDto.Id))">
    <MudPaper Elevation="1" Style="max-width: 350px; min-width: 200px; margin: auto; border: 1px solid #e0e0e0;">
        <div class="card-content" style="padding: 20px;">
            <!-- Image -->
            <div style="display: flex; justify-content: center; margin-bottom: 16px;">
                <MudAvatar Size="Size.Large"
                           Style="box-shadow: 0 4px 10px #000000">
                     <MudImage Src="@realtorDto.PictureUrl" Size="Size.Large" Style="border-radius: 50%;" />
                </MudAvatar>
            </div>

            <MudText Typo="Typo.h6" Style="text-align: center; font-weight: 600; margin-bottom: 8px;">
                @realtorDto.FirstName @realtorDto.LastName
            </MudText>

            <div style="text-align: center; margin-bottom: 16px;">
                <MudText Typo="Typo.body2" Style="display: block; margin-bottom: 4px;">
                    <MudIcon Icon="@Icons.Material.Filled.Phone" Size="Size.Small" Class="mr-1" />
                    @realtorDto.PhoneNumber
                </MudText>
                <MudText Typo="Typo.body2" Style="display: block;">
                    <MudIcon Icon="@Icons.Material.Filled.Email" Size="Size.Small" Class="mr-1" />
                    @realtorDto.Email
                </MudText>
            </div>

            <!-- Extra space -->
            <MudDivider Style="margin: 12px 0;" />

            <!-- Agency Info -->
            @* Added link - Robert *@
            <div type="button" style="display: flex; justify-content: center;" @onclick="() => NavigateToAgency(realtorDto.AgencyId ?? 0)">
                    <MudText Typo="Typo.caption" 
                        Style="color: #666; transition: color 0.2s ease, text-decoration 0.2s ease;"
                        class="agency-link">
                        @realtorDto.AgencyName
                    </MudText>
            </div>
        </div>
    </MudPaper>
</div>
</div>

<style>
    .realtor-profile-container {
    display: flex;
    justify-content: center;
    padding: 16px;
    transition: all 0.3s ease-in-out;
    }

    .realtor-card {
    border-radius: 8px !important;
    background-color: white;
    }

    .realtor-info-card {
        border: 1.5px solid grey !important;
        border-radius: 7px !important;
        background-color: white;
        transition: all 0.3s ease-in-out;
        cursor: pointer;
        overflow: hidden;
    }

        .realtor-info-card:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3) !important;
            border-color: #ae9d65 !important;
        }
</style>

@code {
    [Parameter] public RealtorSummaryDto realtorDto { get; set; }

    // Navigate by Robert
    private void NavigateToAgency(int agencyId)
    {
        navigationManager.NavigateTo($"/agency/{agencyId}");
    }
    private void NavigateToPerson(int id)
    {
        navigationManager.NavigateTo($"/realtor/{id}");
    }
}
